---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import MobileDrawer from '../components/MobileDrawer.astro';

const { title } = Astro.props;
---
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    
    <style is:global>
      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
      }
      .reveal.active {
        opacity: 1;
        transform: translateY(0);
      }

      @keyframes fadeUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .hero-animate {
        opacity: 0;
        animation: fadeUp 0.8s cubic-bezier(0.5, 0, 0, 1) forwards;
      }
      .delay-100 { animation-delay: 0.1s; }
      .delay-200 { animation-delay: 0.2s; }
      .delay-300 { animation-delay: 0.3s; }

      /* Staggered Reveal Animation */
      .stagger-item {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s cubic-bezier(0.65, 0.05, 0.36, 1), transform 0.5s cubic-bezier(0.65, 0.05, 0.36, 1);
      }
      .stagger-item.is-visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* THEME TRANSITION ANIMATION */
      ::view-transition-old(root),
      ::view-transition-new(root) {
        animation: none;
        mix-blend-mode: normal;
      }
      ::view-transition-new(root) { z-index: 9999; }
      ::view-transition-old(root) { z-index: 1; }
      
      .dark .sun-icon { display: block; }
      .dark .moon-icon { display: none; }
      .light .sun-icon { display: none; }
      .light .moon-icon { display: block; }

      .menu-open { overflow: hidden; }

      .skill-tag {
        padding: 0.25rem 0.75rem;
        background-color: rgb(245 245 245);
        border: 1px solid rgb(229 229 229);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: rgb(82 82 82);
        transition: all 0.3s;
      }
      :global(.dark) .skill-tag {
        background-color: rgb(255 255 255 / 0.05);
        border-color: rgb(255 255 255 / 0.1);
        color: rgb(163 163 163);
      }
      .group:hover .skill-tag {
        color: rgb(4 120 87);
        background-color: rgb(236 253 245);
      }
      :global(.dark) .group:hover .skill-tag {
        color: white;
        background-color: rgb(255 255 255 / 0.1);
      }
    </style>

    <script is:inline>
      const theme = (() => {
        if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
          return localStorage.getItem('theme');
        }
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
          return 'dark';
        }
        return 'light';
      })();
      if (theme === 'light') document.documentElement.classList.remove('dark');
      else document.documentElement.classList.add('dark');
      window.localStorage.setItem('theme', theme);
    </script>
</head>
<body class="bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-300 font-sans transition-colors duration-300 relative selection:bg-emerald-500/30 md:text-lg">
    
    <div class="fixed top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-emerald-500/5 blur-[120px] rounded-full pointer-events-none -z-10 dark:opacity-0 transition-opacity duration-500"></div>
    <div class="fixed top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-white/[0.02] blur-[120px] rounded-full pointer-events-none -z-10 opacity-0 dark:opacity-100 transition-opacity duration-500"></div>
    <div class="fixed inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 dark:opacity-10 pointer-events-none z-[-1] mix-blend-overlay"></div>

    <Header />
    <MobileDrawer />

    <main class="max-w-3xl mx-auto px-6 pt-32 pb-20">
        <slot />
    </main>

    <Footer />

    <script src="../scripts/main.js"></script>
</body>
</html>
